## 1.TCP报文格式

1、端口号:  源端口、目的端口

2、序号和确认号。	是TCP可靠传输的关键部分。 

3、数据偏移／首部长度：4bits。 4位首部长度字段所能表示的最大值为1111，转化为10进制为15，15*32/8 = 60，故报头最大长度为60字节 

4、保留 

5、控制位：URG  ACK  PSH  RST  SYN  FIN，共6个，每一个标志位表示一个控制功能。

- URG：紧急指针标志 。
- ACK：确认序号标志，为1时表示确认号有效，为0表示报文中不含确认信息，忽略确认号字段。 
- PSH：push标志，为1表示是带有push标志的数据，指示接收方在接收到该报文段以后，应尽快将这个报文段交给应用程序，而不是在缓冲区排队。 
- RST：重置连接标志，用于重置由于主机崩溃或其他原因而出现错误的连接。 
- SYN：同步序号。FIN：finish标志，用于释放连接 。 

6、窗口：滑动窗口大小，用来告知发送端接受端的缓存大小，以此控制发送端发送数据的速率，从而达到流量控制。

7、校验和：奇偶校验，此校验和是对整个的 TCP 报文段 

8、紧急指针：只有当 URG 标志置 1 时紧急指针才有效。 

9、选项和填充 

10、数据部分： TCP 报文段中的数据部分是可选的。 

## 2、TCP与UDP区别 

1、TCP面向连接（如打电话要先拨号建立连接）;UDP是无连接的，即发送数据之前不需要建立连接 

2、TCP提供可靠的服务。也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付

3、TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流;UDP是面向报文的

UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）

4、每一条TCP连接只能是点到点的;UDP支持一对一，一对多，多对一和多对多的交互通信

5、TCP首部开销20字节;UDP的首部开销小，只有8个字节

6、TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道

